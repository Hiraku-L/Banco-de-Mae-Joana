<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Mãe Joana</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="./movies/pending/personalizado.js"></script>
    <script src="./api.js"></script>
    <link rel="shortcut icon" href="../../imagens/favicon2.png" type="image/x-icon">
    <link rel="stylesheet" href="home.css">
</head>
<body>
    <header class="topbar">
      <div class="d-flex align-items-center gap-3">
        <button class="btn btn-ghost" aria-label="Toggle sidebar" onclick="toggleSidebar()">☰</button>
        <a class="navbar-brand p-0" href="#"><img src="../../imagens/favicon2.png" class="joanacoin" alt=""> <span class="brand-title">Banco De Mãe Joana</span></a>
      </div>
      <div class="actions">
        <div class="balance">J$ <span class="saldoConta">0.00</span></div>
        <button class="btn btn-outline-light" onclick="showPix()">JoanaPix</button>
        <button class="btn btn-outline-light" onclick="logout()">Sair</button>
      </div>
    </header>

    <!-- Barra Lateral -->
          <nav class="col-md-2 d-none d-md-block sidebar navbar-dark bg-dark">
            <div class="sidebar-sticky">
                  <ul class="nav flex-column">
               <!-- <li class="nav-item">
                  <a class="nav-link active" href="#">
                    <i class="fa fa-home" aria-hidden="true"></i>
                    Dashboard
                  </a>
                </li>-->
                <!-- Outros itens do menu -->
                <li class="nav-item">
                  <div class="user-info">Usuário: <strong class="nomeUsuario"></strong></div>
                </li>
                <li class="nav-item">
                    <div class="user-info">Joanacoins: <strong class="saldoConta">0</strong></div>
                </li>
                <div class="pt-3 pb-3">
                    <li class="nav-item">
                      <a class="nav-item text-light" href="#" onclick="mostrarSecao('cine')"><span class="label">Cine Mãe Joana</span></a>
                    </li>
                </div>
                
              </ul>
            </div>
             
          </nav>

    <div class=" container-fluid principal ">

 
        <div class=" principal">
         
            
            <!-- Área Principal -->
            <main role="main" class="principal">
            

                <!-- O conteúdo será carregado aqui dinamicamente -->
                <div class="main-content" id="conteudoPrincipal">

                </div>

            </main>


          
           
      <!-- Modal PIX (standardized) -->
<div class="modal fade" id="pixModal" tabindex="-1" role="dialog" aria-labelledby="pixModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header">
        <h5 class="modal-title" id="pixModalLabel">Pagamento PIX</h5>
        <button type="button" class="btn-close btn-close-white" aria-label="Close" onclick="hidePixModal()"></button>
      </div>
      <div class="modal-body">
        <form id="pixForm">
          <div class="form-group mb-3">
            <label for="pixDate">Data</label>
            <input type="text" class="form-control" id="pixDate" name="pixDate" readonly>
          </div>
          <div class="form-group mb-3">
            <label for="destinatarioSelect">Destinatário</label>
            <select class="form-control" id="destinatarioSelect" name="pixRecipient"></select>
          </div>
          <div class="form-group mb-3">
            <label for="pixValue">Valor</label>
            <input type="number" step="0.01" class="form-control" id="pixValue" name="pixValue" placeholder="Joanacoin$">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-light" onclick="hidePixModal()">Fechar</button>
        <button type="button" class="btn-primary-cta" onclick="submitPix()">Enviar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Cine Personalizado -->
<div class="modal fade" id="cinePersonalizadoModal" tabindex="-1" aria-labelledby="cinePersonalizadoLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header">
        <h5 class="modal-title" id="cinePersonalizadoLabel">Criar Cine Personalizado</h5>
        <button type="button" class="btn-close btn btn-light" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="customCineForm">
          <div class="mb-3">
            <label for="customTitle">Título</label>
            <input type="text" class="form-control" id="customTitle">
          </div>
          <div class="mb-3">
            <label for="customType">Tipo</label>
            <select class="form-control" id="customType" onchange="toggleEpisodeFields()">
              <option value="filme">Filme</option>
              <option value="serie">Série</option>
            </select>
          </div>
          <div class="mb-3" id="episodeCountDiv" style="display:none">
            <label for="customEpisodes">Episódios</label>
            <input type="number" class="form-control" id="customEpisodes" value="1">
          </div>
          <div class="mb-3">
            <label for="customDuration">Duração (minutos)</label>
            <input type="number" class="form-control" id="customDuration">
          </div>
          <!---
          <div class="mb-3">
            <label for="customPoster">Poster URL</label>
            <input type="text" class="form-control" id="customPoster">
          </div>
          -->
          
          <div class="mb-3">
            <label for="customUsers">Selecionar Usuários</label>
            <div id="customUsers" class="cine-users-grid"></div>
            <div class="muted-small mt-2">Clique para marcar vários usuários</div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Fechar</button>
        <button type="button" class="btn btn-success" onclick="submitCustomCine()">Criar Cine</button>
      </div>
    </div>
  </div>
</div>
<div id="modalContainer"></div>


<div id="cine" class="cine">
  <div class="cine-header">
    <div class="cine-heading">
      <h1 class="main-title">Olá, <span class="nomeUsuario"></span></h1>
      <p class="hero-sub">Faça um JOANAPIX! Crie um cine Mãe Joana!</p>
    </div>
    <div class="cine-actions">
      <button class="btn-primary-cta" onclick="showCineModal()">Cine Mãe Joana Filmes</button>
      <button id="btnAbrirCinePersonalizado" class="btn-secondary-cta" onclick="showCinePersonalizadoModal()">Cine Personalizado</button>
    </div>
  </div>

  <h2 class="section-title-lg">Cines Pendentes</h2>
  <div id="pendingMovies">
  <!-- Pending movies will be loaded here -->
</div>
</div>


<!-- Scripts placed before closing body to ensure DOM is ready -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="home.js"></script>
<script src="../../auth-guard.js"></script>
</body>
</html>